{% extends "layout_picker.html" %}

{% set serviceName = "Apply for a resident's parking permit" %}
{% set pageTitle = "Enter vehicle details" %}

{% block content %}

<div class="column-two-thirds">
  {% set r = residentAmount %}
  {# set default as 1 #}
  {% if not r %}
    {% set r = 1 %}
  {% endif %}
  <p>
    You've chosen {{r}} resident's parking permit{{"s" if r > 1}}.
  </p>

  {% if not council.DVLAAPI%}

    <p>
      We need your vehicle's registration number{{"s" if r > 1}} to associate your permit{{"s" if r > 1}} with your vehicle{{"s" if r > 1}}.
    </p>

  {% else %}

    <p>
      We need your vehicle's registration number{{"s" if r > 1}} to
    </p>

    <ul class="list list-bullet">
      <li>
        calculate the price of your permit{{"s" if r > 1}} using DVLA's records
      </li>
      <li>
        associate your permit{{"s" if r > 1}} with your vehicle{{"s" if r > 1}}
      </li>
    </ul>

  {% endif %}

  <h2 class="heading-medium">Enter your vehicle's registration number{{"s" if r > 1}}</h2>

  {# No idea why I need to add this, but for some reason nunjucks is behaving strangely here #}
  {% set r = r / 10 %}
  {% set r = r * 10 %}
  {% for i in range(1, r + 1) %}
    <div class="form-group">
        <form method="post">
            <fieldset>
                {% if r > 1 %}<legend class="visuallyhidden">Vehicle {{i}}</legend>{% endif %}
                <div>
                    {% if r > 1 %}<label class="form-label" for="postcode">Vehicle {{i}}</label>{% endif %}
                    <input class="reg-number" id="reg-number-{{i}}" name="reg-number-{{i}}" type="text" aria-invalid="false" value="">
                </div>
            </fieldset>
        </form>
    </div>
  {% endfor %}

  {% if council.DVLAAPI %}
    {% set nextPage = 'confirm-vehicle-details' %}
  {% elif(council.sixmonth) %}
    {# How long will you need your permit(s)?  #}
    {% set nextPage = 'permit-length' %}
  {% else %}
    {# When should your permit(s) start? #}
    {% set nextPage = 'permit-details' %}
  {% endif %}

  <a class="button" role="button" href="{{nextPage}}">Next</a>

</div>

{% endblock %}
