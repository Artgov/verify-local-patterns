{% extends "layout_picker.html" %}

{% set serviceName = "Apply for a resident's parking permit" %}

{# residentAmount is a string and must be converted to a number ðŸ˜’ #}
{% set parkingPermitCount = residentAmount * 1 if residentAmount else 1 %}
{% set pluralSuffix = 's' if parkingPermitCount > 1 else '' %}

{% set pageTitle = "Paying for your permit" + pluralSuffix %}

{% block content %}

<div class="column-two-thirds">

  {% if council.payOnline %}
    <p>You're about to pay Â£{{permitRequestData.totalSum }} for {{residentAmount}} permits.</p>
  {% else %}
    <p>
      Once we have processed and approved your application, we will contact you for payment. You will be able to pay over the phone by either a debit/credit card (no service charges apply).
    </p>
    <p>
      You will need to pay for:
    </p>
  {% endif %}

  {% for permit in data %}
    {% if loop.length > 1 %}
      <h3 class="heading-small">Vehicle {{ loop.index }}</h3>
    {% endif %}
    <table>
      <tr>
        <th>Permit type</th>
        <th>Resident's parking permit</th>
      </tr>
    <tr>
      <th>Vehicle registration</th>
      <th>{{ permit.registerNumber }}</th>
    </tr>
    <tr>
      <th>Permit length</th>
      <th>{{ permit.length }}</th>
    </tr>
    <tr>
      <th>Start date</th>
      <th>{{ permit.startDate | niceDate }}</th>
    </tr>
    <tr>
      <th>Expiry date</th>
      <th>{{ permit.endDate | niceDate }}</th>
    </tr>
    <tr>
      <th>Cost</th>
      <th>
        Â£{{ permit.cost }}
      </th>
    </tr>
  </table>
  {% endfor %}

  {% if council.payOnline %}
    <a class="button" role="button" href="choose-payment">Next</a>
  {% else %}
    <a class="button" role="button" href="contact-reference">Next</a>
  {% endif %}
</main>

{% endblock %}
